!function(t){function e(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=693)}({106:function(t,e,r){"use strict";function i(t){return null!==t&&"object"==typeof t}t.exports=i},128:function(t,e,r){function i(t){if(t)return n(t)}function n(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},i.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i,n=0;n<r.length;n++)if((i=r[n])===e||i.fn===e){r.splice(n,1);break}return this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks["$"+t];if(r){r=r.slice(0);for(var i=0,n=r.length;i<n;++i)r[i].apply(this,e)}return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},238:function(t,e){function r(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(t){r.prototype[t]=function(){return this._defaults.push({fn:t,arguments:arguments}),this}}),r.prototype._setDefaults=function(t){this._defaults.forEach(function(e){t[e.fn].apply(t,e.arguments)})},t.exports=r},239:function(t,e,r){"use strict";function i(t){if(t)return n(t)}function n(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}var o=r(106);t.exports=i,i.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},i.prototype.parse=function(t){return this._parser=t,this},i.prototype.responseType=function(t){return this._responseType=t,this},i.prototype.serialize=function(t){return this._serializer=t,this},i.prototype.timeout=function(t){if(!t||"object"!=typeof t)return this._timeout=t,this._responseTimeout=0,this;for(var e in t)switch(e){case"deadline":this._timeout=t.deadline;break;case"response":this._responseTimeout=t.response;break;default:console.warn("Unknown timeout option",e)}return this},i.prototype.retry=function(t,e){return 0!==arguments.length&&!0!==t||(t=1),t<=0&&(t=0),this._maxRetries=t,this._retries=0,this._retryCallback=e,this};var s=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];i.prototype._shouldRetry=function(t,e){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var r=this._retryCallback(t,e);if(!0===r)return!0;if(!1===r)return!1}catch(t){console.error(t)}if(e&&e.status&&e.status>=500&&501!=e.status)return!0;if(t){if(t.code&&~s.indexOf(t.code))return!0;if(t.timeout&&"ECONNABORTED"==t.code)return!0;if(t.crossDomain)return!0}return!1},i.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},i.prototype.then=function(t,e){if(!this._fullfilledPromise){var r=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(t,e){r.end(function(r,i){r?e(r):t(i)})})}return this._fullfilledPromise.then(t,e)},i.prototype.catch=function(t){return this.then(void 0,t)},i.prototype.use=function(t){return t(this),this},i.prototype.ok=function(t){if("function"!=typeof t)throw Error("Callback required");return this._okCallback=t,this},i.prototype._isResponseOK=function(t){return!!t&&(this._okCallback?this._okCallback(t):t.status>=200&&t.status<300)},i.prototype.get=function(t){return this._header[t.toLowerCase()]},i.prototype.getHeader=i.prototype.get,i.prototype.set=function(t,e){if(o(t)){for(var r in t)this.set(r,t[r]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},i.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},i.prototype.field=function(t,e){if(null===t||void 0===t)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),o(t)){for(var r in t)this.field(r,t[r]);return this}if(Array.isArray(e)){for(var i in e)this.field(t,e[i]);return this}if(null===e||void 0===e)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof e&&(e=""+e),this._getFormData().append(t,e),this},i.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},i.prototype._auth=function(t,e,r,i){switch(r.type){case"basic":this.set("Authorization","Basic "+i(t+":"+e));break;case"auto":this.username=t,this.password=e;break;case"bearer":this.set("Authorization","Bearer "+t)}return this},i.prototype.withCredentials=function(t){return void 0==t&&(t=!0),this._withCredentials=t,this},i.prototype.redirects=function(t){return this._maxRedirects=t,this},i.prototype.maxResponseSize=function(t){if("number"!=typeof t)throw TypeError("Invalid argument");return this._maxResponseSize=t,this},i.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},i.prototype.send=function(t){var e=o(t),r=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),e&&!this._data)Array.isArray(t)?this._data=[]:this._isHost(t)||(this._data={});else if(t&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(e&&o(this._data))for(var i in t)this._data[i]=t[i];else"string"==typeof t?(r||this.type("form"),r=this._header["content-type"],this._data="application/x-www-form-urlencoded"==r?this._data?this._data+"&"+t:t:(this._data||"")+t):this._data=t;return!e||this._isHost(t)?this:(r||this.type("json"),this)},i.prototype.sortQuery=function(t){return this._sort=void 0===t||t,this},i.prototype._finalizeQueryString=function(){var t=this._query.join("&");if(t&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+t),this._query.length=0,this._sort){var e=this.url.indexOf("?");if(e>=0){var r=this.url.substring(e+1).split("&");"function"==typeof this._sort?r.sort(this._sort):r.sort(),this.url=this.url.substring(0,e)+"?"+r.join("&")}}},i.prototype._appendQueryString=function(){console.trace("Unsupported")},i.prototype._timeoutError=function(t,e,r){if(!this._aborted){var i=new Error(t+e+"ms exceeded");i.timeout=e,i.code="ECONNABORTED",i.errno=r,this.timedout=!0,this.abort(),this.callback(i)}},i.prototype._setTimeouts=function(){var t=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){t._timeoutError("Timeout of ",t._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){t._timeoutError("Response timeout of ",t._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},240:function(t,e,r){"use strict";function i(t){if(t)return n(t)}function n(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}var o=r(241);t.exports=i,i.prototype.get=function(t){return this.header[t.toLowerCase()]},i.prototype._setHeaderProperties=function(t){var e=t["content-type"]||"";this.type=o.type(e);var r=o.params(e);for(var i in r)this[i]=r[i];this.links={};try{t.link&&(this.links=o.parseLinks(t.link))}catch(t){}},i.prototype._setStatusProperties=function(t){var e=t/100|0;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.redirect=3==e,this.clientError=4==e,this.serverError=5==e,this.error=(4==e||5==e)&&this.toError(),this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.forbidden=403==t,this.notFound=404==t}},241:function(t,e,r){"use strict";e.type=function(t){return t.split(/ *; */).shift()},e.params=function(t){return t.split(/ *; */).reduce(function(t,e){var r=e.split(/ *= */),i=r.shift(),n=r.shift();return i&&n&&(t[i]=n),t},{})},e.parseLinks=function(t){return t.split(/ *, */).reduce(function(t,e){var r=e.split(/ *; */),i=r[0].slice(1,-1);return t[r[1].split(/ *= */)[1].slice(1,-1)]=i,t},{})},e.cleanHeader=function(t,e){return delete t["content-type"],delete t["content-length"],delete t["transfer-encoding"],delete t.host,e&&(delete t.authorization,delete t.cookie),t}},257:function(t,e,r){var i;!function(n){"use strict";function o(t,e,r){var i,n=document.createElement("img");return n.onerror=function(i){return o.onerror(n,i,t,e,r)},n.onload=function(i){return o.onload(n,i,t,e,r)},"string"==typeof t?(o.fetchBlob(t,function(e){e?(t=e,i=o.createObjectURL(t)):(i=t,r&&r.crossOrigin&&(n.crossOrigin=r.crossOrigin)),n.src=i},r),n):o.isInstanceOf("Blob",t)||o.isInstanceOf("File",t)?(i=n._objectURL=o.createObjectURL(t),i?(n.src=i,n):o.readFile(t,function(t){var r=t.target;r&&r.result?n.src=r.result:e&&e(t)})):void 0}function s(t,e){!t._objectURL||e&&e.noRevoke||(o.revokeObjectURL(t._objectURL),delete t._objectURL)}var a=n.createObjectURL&&n||n.URL&&URL.revokeObjectURL&&URL||n.webkitURL&&webkitURL;o.fetchBlob=function(t,e,r){e()},o.isInstanceOf=function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},o.transform=function(t,e,r,i,n){r(t,n)},o.onerror=function(t,e,r,i,n){s(t,n),i&&i.call(t,e)},o.onload=function(t,e,r,i,n){s(t,n),i&&o.transform(t,n,i,r,{})},o.createObjectURL=function(t){return!!a&&a.createObjectURL(t)},o.revokeObjectURL=function(t){return!!a&&a.revokeObjectURL(t)},o.readFile=function(t,e,r){if(n.FileReader){var i=new FileReader;if(i.onload=i.onerror=e,r=r||"readAsDataURL",i[r])return i[r](t),i}return!1},void 0!==(i=function(){return o}.call(e,r,e,t))&&(t.exports=i)}("undefined"!=typeof window&&window||this)},368:function(t,e,r){var i,n,o;!function(s){"use strict";n=[r(257)],i=s,void 0!==(o="function"==typeof i?i.apply(e,n):i)&&(t.exports=o)}(function(t){"use strict";var e="undefined"!=typeof Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);t.blobSlice=e&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},t.metaDataParsers={jpeg:{65505:[]}},t.parseMetaData=function(e,r,i,n){i=i||{},n=n||{};var o=this,s=i.maxMetaDataSize||262144;!!("undefined"!=typeof DataView&&e&&e.size>=12&&"image/jpeg"===e.type&&t.blobSlice)&&t.readFile(t.blobSlice.call(e,0,s),function(e){if(e.target.error)return console.log(e.target.error),void r(n);var s,a,u,c,l=e.target.result,h=new DataView(l),f=2,p=h.byteLength-4,d=f;if(65496===h.getUint16(0)){for(;f<p&&((s=h.getUint16(f))>=65504&&s<=65519||65534===s);){if(a=h.getUint16(f+2)+2,f+a>h.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(u=t.metaDataParsers.jpeg[s])for(c=0;c<u.length;c+=1)u[c].call(o,h,f,a,n,i);f+=a,d=f}!i.disableImageHead&&d>6&&(l.slice?n.imageHead=l.slice(0,d):n.imageHead=new Uint8Array(l).subarray(0,d))}else console.log("Invalid JPEG file: Missing JPEG marker.");r(n)},"readAsArrayBuffer")||r(n)},t.hasMetaOption=function(t){return t&&t.meta};var r=t.transform;t.transform=function(e,i,n,o,s){t.hasMetaOption(i)?t.parseMetaData(o,function(s){r.call(t,e,i,n,o,s)},i,s):r.apply(t,arguments)}})},43:function(t,e,r){function i(){}function n(t){if(!m(t))return t;var e=[];for(var r in t)o(e,r,t[r]);return e.join("&")}function o(t,e,r){if(null!=r)if(Array.isArray(r))r.forEach(function(r){o(t,e,r)});else if(m(r))for(var i in r)o(t,e+"["+i+"]",r[i]);else t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));else null===r&&t.push(encodeURIComponent(e))}function s(t){for(var e,r,i={},n=t.split("&"),o=0,s=n.length;o<s;++o)e=n[o],r=e.indexOf("="),-1==r?i[decodeURIComponent(e)]="":i[decodeURIComponent(e.slice(0,r))]=decodeURIComponent(e.slice(r+1));return i}function a(t){for(var e,r,i,n,o=t.split(/\r?\n/),s={},a=0,u=o.length;a<u;++a)r=o[a],-1!==(e=r.indexOf(":"))&&(i=r.slice(0,e).toLowerCase(),n=v(r.slice(e+1)),s[i]=n);return s}function u(t){return/[\/+]json($|[^-\w])/.test(t)}function c(t){this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var e=this.xhr.status;1223===e&&(e=204),this._setStatusProperties(e),this.header=this.headers=a(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&t._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function l(t,e){var r=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new c(r)}catch(e){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=e,r.xhr?(t.rawResponse=void 0===r.xhr.responseType?r.xhr.responseText:r.xhr.response,t.status=r.xhr.status?r.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),r.callback(t)}r.emit("response",e);var i;try{r._isResponseOK(e)||(i=new Error(e.statusText||"Unsuccessful HTTP response"))}catch(t){i=t}i?(i.original=t,i.response=e,i.status=e.status,r.callback(i,e)):r.callback(null,e)})}function h(t,e,r){var i=b("DELETE",t);return"function"==typeof e&&(r=e,e=null),e&&i.send(e),r&&i.end(r),i}var f;"undefined"!=typeof window?f=window:"undefined"!=typeof self?f=self:(console.warn("Using browser-only version of superagent in non-browser environment"),f=this);var p=r(128),d=r(239),m=r(106),g=r(240),y=r(238),b=e=t.exports=function(t,r){return"function"==typeof r?new e.Request("GET",t).end(r):1==arguments.length?new e.Request("GET",t):new e.Request(t,r)};e.Request=l,b.getXHR=function(){if(!(!f.XMLHttpRequest||f.location&&"file:"==f.location.protocol&&f.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}throw Error("Browser-only version of superagent could not find XHR")};var v="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};b.serializeObject=n,b.parseString=s,b.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},b.serialize={"application/x-www-form-urlencoded":n,"application/json":JSON.stringify},b.parse={"application/x-www-form-urlencoded":s,"application/json":JSON.parse},g(c.prototype),c.prototype._parseBody=function(t){var e=b.parse[this.type];return this.req._parser?this.req._parser(this,t):(!e&&u(this.type)&&(e=b.parse["application/json"]),e&&t&&(t.length||t instanceof Object)?e(t):null)},c.prototype.toError=function(){var t=this.req,e=t.method,r=t.url,i="cannot "+e+" "+r+" ("+this.status+")",n=new Error(i);return n.status=this.status,n.method=e,n.url=r,n},b.Response=c,p(l.prototype),d(l.prototype),l.prototype.type=function(t){return this.set("Content-Type",b.types[t]||t),this},l.prototype.accept=function(t){return this.set("Accept",b.types[t]||t),this},l.prototype.auth=function(t,e,r){1===arguments.length&&(e=""),"object"==typeof e&&null!==e&&(r=e,e=""),r||(r={type:"function"==typeof btoa?"basic":"auto"});var i=function(t){if("function"==typeof btoa)return btoa(t);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(t,e,r,i)},l.prototype.query=function(t){return"string"!=typeof t&&(t=n(t)),t&&this._query.push(t),this},l.prototype.attach=function(t,e,r){if(e){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(t,e,r||e.name)}return this},l.prototype._getFormData=function(){return this._formData||(this._formData=new f.FormData),this._formData},l.prototype.callback=function(t,e){if(this._shouldRetry(t,e))return this._retry();var r=this._callback;this.clearTimeout(),t&&(this._maxRetries&&(t.retries=this._retries-1),this.emit("error",t)),r(t,e)},l.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},l.prototype.buffer=l.prototype.ca=l.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},l.prototype.pipe=l.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},l.prototype._isHost=function(t){return t&&"object"==typeof t&&!Array.isArray(t)&&"[object Object]"!==Object.prototype.toString.call(t)},l.prototype.end=function(t){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=t||i,this._finalizeQueryString(),this._end()},l.prototype._end=function(){var t=this,e=this.xhr=b.getXHR(),r=this._formData||this._data;this._setTimeouts(),e.onreadystatechange=function(){var r=e.readyState;if(r>=2&&t._responseTimeoutTimer&&clearTimeout(t._responseTimeoutTimer),4==r){var i;try{i=e.status}catch(t){i=0}if(!i){if(t.timedout||t._aborted)return;return t.crossDomainError()}t.emit("end")}};var i=function(e,r){r.total>0&&(r.percent=r.loaded/r.total*100),r.direction=e,t.emit("progress",r)};if(this.hasListeners("progress"))try{e.onprogress=i.bind(null,"download"),e.upload&&(e.upload.onprogress=i.bind(null,"upload"))}catch(t){}try{this.username&&this.password?e.open(this.method,this.url,!0,this.username,this.password):e.open(this.method,this.url,!0)}catch(t){return this.callback(t)}if(this._withCredentials&&(e.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof r&&!this._isHost(r)){var n=this._header["content-type"],o=this._serializer||b.serialize[n?n.split(";")[0]:""];!o&&u(n)&&(o=b.serialize["application/json"]),o&&(r=o(r))}for(var s in this.header)null!=this.header[s]&&this.header.hasOwnProperty(s)&&e.setRequestHeader(s,this.header[s]);return this._responseType&&(e.responseType=this._responseType),this.emit("request",this),e.send(void 0!==r?r:null),this},b.agent=function(){return new y},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(t){y.prototype[t.toLowerCase()]=function(e,r){var i=new b.Request(t,e);return this._setDefaults(i),r&&i.end(r),i}}),y.prototype.del=y.prototype.delete,b.get=function(t,e,r){var i=b("GET",t);return"function"==typeof e&&(r=e,e=null),e&&i.query(e),r&&i.end(r),i},b.head=function(t,e,r){var i=b("HEAD",t);return"function"==typeof e&&(r=e,e=null),e&&i.query(e),r&&i.end(r),i},b.options=function(t,e,r){var i=b("OPTIONS",t);return"function"==typeof e&&(r=e,e=null),e&&i.send(e),r&&i.end(r),i},b.del=h,b.delete=h,b.patch=function(t,e,r){var i=b("PATCH",t);return"function"==typeof e&&(r=e,e=null),e&&i.send(e),r&&i.end(r),i},b.post=function(t,e,r){var i=b("POST",t);return"function"==typeof e&&(r=e,e=null),e&&i.send(e),r&&i.end(r),i},b.put=function(t,e,r){var i=b("PUT",t);return"function"==typeof e&&(r=e,e=null),e&&i.send(e),r&&i.end(r),i}},675:function(t,e,r){var i,n,o;!function(s){"use strict";n=[r(257),r(368)],i=s,void 0!==(o="function"==typeof i?i.apply(e,n):i)&&(t.exports=o)}(function(t){"use strict";t.ExifMap=function(){return this},t.ExifMap.prototype.map={Orientation:274},t.ExifMap.prototype.get=function(t){return this[t]||this[this.map[t]]},t.getExifThumbnail=function(e,r,i){return!i||r+i>e.byteLength?void console.log("Invalid Exif data: Invalid thumbnail data."):t.createObjectURL(new Blob([e.buffer.slice(r,r+i)]))},t.exifTagTypes={1:{getValue:function(t,e){return t.getUint8(e)},size:1},2:{getValue:function(t,e){return String.fromCharCode(t.getUint8(e))},size:1,ascii:!0},3:{getValue:function(t,e,r){return t.getUint16(e,r)},size:2},4:{getValue:function(t,e,r){return t.getUint32(e,r)},size:4},5:{getValue:function(t,e,r){return t.getUint32(e,r)/t.getUint32(e+4,r)},size:8},9:{getValue:function(t,e,r){return t.getInt32(e,r)},size:4},10:{getValue:function(t,e,r){return t.getInt32(e,r)/t.getInt32(e+4,r)},size:8}},t.exifTagTypes[7]=t.exifTagTypes[1],t.getExifValue=function(e,r,i,n,o,s){var a,u,c,l,h,f,p=t.exifTagTypes[n];if(!p)return void console.log("Invalid Exif data: Invalid tag type.");if(a=p.size*o,(u=a>4?r+e.getUint32(i+8,s):i+8)+a>e.byteLength)return void console.log("Invalid Exif data: Invalid data offset.");if(1===o)return p.getValue(e,u,s);for(c=[],l=0;l<o;l+=1)c[l]=p.getValue(e,u+l*p.size,s);if(p.ascii){for(h="",l=0;l<c.length&&"\0"!==(f=c[l]);l+=1)h+=f;return h}return c},t.parseExifTag=function(e,r,i,n,o){var s=e.getUint16(i,n);o.exif[s]=t.getExifValue(e,r,i,e.getUint16(i+2,n),e.getUint32(i+4,n),n)},t.parseExifTags=function(t,e,r,i,n){var o,s,a;if(r+6>t.byteLength)return void console.log("Invalid Exif data: Invalid directory offset.");if(o=t.getUint16(r,i),(s=r+2+12*o)+4>t.byteLength)return void console.log("Invalid Exif data: Invalid directory size.");for(a=0;a<o;a+=1)this.parseExifTag(t,e,r+2+12*a,i,n);return t.getUint32(s,i)},t.parseExifData=function(e,r,i,n,o){if(!o.disableExif){var s,a,u,c=r+10;if(1165519206===e.getUint32(r+4)){if(c+8>e.byteLength)return void console.log("Invalid Exif data: Invalid segment size.");if(0!==e.getUint16(r+8))return void console.log("Invalid Exif data: Missing byte alignment offset.");switch(e.getUint16(c)){case 18761:s=!0;break;case 19789:s=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==e.getUint16(c+2,s))return void console.log("Invalid Exif data: Missing TIFF marker.");a=e.getUint32(c+4,s),n.exif=new t.ExifMap,a=t.parseExifTags(e,c,c+a,s,n),a&&!o.disableExifThumbnail&&(u={exif:{}},a=t.parseExifTags(e,c,c+a,s,u),u.exif[513]&&(n.exif.Thumbnail=t.getExifThumbnail(e,c+u.exif[513],u.exif[514]))),n.exif[34665]&&!o.disableExifSub&&t.parseExifTags(e,c,c+n.exif[34665],s,n),n.exif[34853]&&!o.disableExifGps&&t.parseExifTags(e,c,c+n.exif[34853],s,n)}}},t.metaDataParsers.jpeg[65505].push(t.parseExifData)})},676:function(t,e,r){var i,n,o;!function(s){"use strict";n=[r(257)],i=s,void 0!==(o="function"==typeof i?i.apply(e,n):i)&&(t.exports=o)}(function(t){"use strict";var e=t.transform;t.transform=function(r,i,n,o,s){e.call(t,t.scale(r,i,s),i,n,o,s)},t.transformCoordinates=function(){},t.getTransformedOptions=function(t,e){var r,i,n,o,s=e.aspectRatio;if(!s)return e;r={};for(i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);return r.crop=!0,n=t.naturalWidth||t.width,o=t.naturalHeight||t.height,n/o>s?(r.maxWidth=o*s,r.maxHeight=o):(r.maxWidth=n,r.maxHeight=n/s),r},t.renderImageToCanvas=function(t,e,r,i,n,o,s,a,u,c){return t.getContext("2d").drawImage(e,r,i,n,o,s,a,u,c),t},t.hasCanvasOption=function(t){return t.canvas||t.crop||!!t.aspectRatio},t.scale=function(e,r,i){function n(){var t=Math.max((u||w)/w,(c||_)/_);t>1&&(w*=t,_*=t)}function o(){var t=Math.min((s||w)/w,(a||_)/_);t<1&&(w*=t,_*=t)}r=r||{};var s,a,u,c,l,h,f,p,d,m,g,y=document.createElement("canvas"),b=e.getContext||t.hasCanvasOption(r)&&y.getContext,v=e.naturalWidth||e.width,x=e.naturalHeight||e.height,w=v,_=x;if(b&&(r=t.getTransformedOptions(e,r,i),f=r.left||0,p=r.top||0,r.sourceWidth?(l=r.sourceWidth,void 0!==r.right&&void 0===r.left&&(f=v-l-r.right)):l=v-f-(r.right||0),r.sourceHeight?(h=r.sourceHeight,void 0!==r.bottom&&void 0===r.top&&(p=x-h-r.bottom)):h=x-p-(r.bottom||0),w=l,_=h),s=r.maxWidth,a=r.maxHeight,u=r.minWidth,c=r.minHeight,b&&s&&a&&r.crop?(w=s,_=a,g=l/h-s/a,g<0?(h=a*l/s,void 0===r.top&&void 0===r.bottom&&(p=(x-h)/2)):g>0&&(l=s*h/a,void 0===r.left&&void 0===r.right&&(f=(v-l)/2))):((r.contain||r.cover)&&(u=s=s||u,c=a=a||c),r.cover?(o(),n()):(n(),o())),b){if(d=r.pixelRatio,d>1&&(y.style.width=w+"px",y.style.height=_+"px",w*=d,_*=d,y.getContext("2d").scale(d,d)),(m=r.downsamplingRatio)>0&&m<1&&w<l&&_<h)for(;l*m>w;)y.width=l*m,y.height=h*m,t.renderImageToCanvas(y,e,f,p,l,h,0,0,y.width,y.height),f=0,p=0,l=y.width,h=y.height,e=document.createElement("canvas"),e.width=l,e.height=h,t.renderImageToCanvas(e,y,0,0,l,h,0,0,l,h);return y.width=w,y.height=_,t.transformCoordinates(y,r),t.renderImageToCanvas(y,e,f,p,l,h,0,0,w,_)}return e.width=w,e.height=_,e}})},683:function(t,e,r){t.exports=r(257),r(676),r(368),r(695),r(675),r(694),r(696)},693:function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var n=r(683),o=i(n),s=r(43),a=i(s),u=function(t,e,r){var i=a.default.post(t);for(var n in e)i.field(n,e[n]);return i.attach("file",r),i},c=function(t,e,r){return a.default.get(window.location.origin+"/s3/get_s3_parameters_for_photo_upload/?file_type="+t).then(function(t){return u(t.body.endpoint,t.body.params_for_original_upload,e).then(function(){return u(t.body.endpoint,t.body.params_for_small_upload,r)})}).then(function(){return window.location.reload(!0)})},l=document.getElementById("profile-photo-upload");l.onchange=function(t){var e=l.files[0];if(e.size>2097152)return void alert("Sorry, please keep images under 2MB.");(0,o.default)(e,function(t){"error"===t.type&&alert("Sorry, something went wrong. Please try again."),t.toBlob(function(t){var r=l.value.split(".").slice(-1)[0];c(r,e,t)},"image/jpeg",1)},{orientation:!0,contain:!0,maxWidth:300,maxHeight:300});t.preventDefault()};var h=document.getElementById("user-profile-form"),f=h.dataset.userId,p=document.getElementsByClassName("alert")[0];if(h.onsubmit=function(t){a.default.put(window.location.origin+"/user/"+f+"/").type("form").send($(h).serialize()).then(function(t){p.innerHTML="Your profile has been updated",p.className="alert alert-success"}).catch(function(t){p.innerHTML="Your profile was not successfully updated: "+t.response.text,p.className="alert alert-danger"}),t.preventDefault()},new URL(window.location.href).search.includes("changedUsername=1")){var d=p.dataset.isBetaUser,m=d?"Hi, friend! When you signed up for the beta, you didn't get to choose a username. I chose one for you, but you can change it below if you'd like.":"Unfortunately, the username you picked was unavailable, so we picked you a similar username. You can update it below.";p.innerHTML=m,p.className="alert alert-warning",a.default.delete(window.location.origin+"/notifications/").catch(function(t){})}},694:function(t,e,r){var i,n,o;!function(s){"use strict";n=[r(257),r(675)],i=s,void 0!==(o="function"==typeof i?i.apply(e,n):i)&&(t.exports=o)}(function(t){"use strict";t.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},t.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},t.ExifMap.prototype.getText=function(t){var e=this.get(t);switch(t){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[t][e];case"ExifVersion":case"FlashpixVersion":if(!e)return;return String.fromCharCode(e[0],e[1],e[2],e[3]);case"ComponentsConfiguration":if(!e)return;return this.stringValues[t][e[0]]+this.stringValues[t][e[1]]+this.stringValues[t][e[2]]+this.stringValues[t][e[3]];case"GPSVersionID":if(!e)return;return e[0]+"."+e[1]+"."+e[2]+"."+e[3]}return String(e)},function(t){var e,r=t.tags,i=t.map;for(e in r)r.hasOwnProperty(e)&&(i[r[e]]=e)}(t.ExifMap.prototype),t.ExifMap.prototype.getAll=function(){var t,e,r={};for(t in this)this.hasOwnProperty(t)&&(e=this.tags[t])&&(r[e]=this.getText(e));return r}})},695:function(t,e,r){var i,n,o;!function(s){"use strict";n=[r(257),r(368)],i=s,void 0!==(o="function"==typeof i?i.apply(e,n):i)&&(t.exports=o)}(function(t){"use strict";"undefined"!=typeof fetch&&"undefined"!=typeof Request&&(t.fetchBlob=function(e,r,i){if(t.hasMetaOption(i))return fetch(new Request(e,i)).then(function(t){return t.blob()}).then(r).catch(function(t){console.log(t),r()});r()})})},696:function(t,e,r){var i,n,o;!function(s){"use strict";n=[r(257),r(676),r(368)],i=s,void 0!==(o="function"==typeof i?i.apply(e,n):i)&&(t.exports=o)}(function(t){"use strict";var e=t.hasCanvasOption,r=t.hasMetaOption,i=t.transformCoordinates,n=t.getTransformedOptions;t.hasCanvasOption=function(r){return!!r.orientation||e.call(t,r)},t.hasMetaOption=function(e){return e&&!0===e.orientation||r.call(t,e)},t.transformCoordinates=function(e,r){i.call(t,e,r);var n=e.getContext("2d"),o=e.width,s=e.height,a=e.style.width,u=e.style.height,c=r.orientation;if(c&&!(c>8))switch(c>4&&(e.width=s,e.height=o,e.style.width=u,e.style.height=a),c){case 2:n.translate(o,0),n.scale(-1,1);break;case 3:n.translate(o,s),n.rotate(Math.PI);break;case 4:n.translate(0,s),n.scale(1,-1);break;case 5:n.rotate(.5*Math.PI),n.scale(1,-1);break;case 6:n.rotate(.5*Math.PI),n.translate(0,-s);break;case 7:n.rotate(.5*Math.PI),n.translate(o,-s),n.scale(-1,1);break;case 8:n.rotate(-.5*Math.PI),n.translate(-o,0)}},t.getTransformedOptions=function(e,r,i){var o,s,a=n.call(t,e,r),u=a.orientation;if(!0===u&&i&&i.exif&&(u=i.exif.get("Orientation")),!u||u>8||1===u)return a;o={};for(s in a)a.hasOwnProperty(s)&&(o[s]=a[s]);switch(o.orientation=u,u){case 2:o.left=a.right,o.right=a.left;break;case 3:o.left=a.right,o.top=a.bottom,o.right=a.left,o.bottom=a.top;break;case 4:o.top=a.bottom,o.bottom=a.top;break;case 5:o.left=a.top,o.top=a.left,o.right=a.bottom,o.bottom=a.right;break;case 6:o.left=a.top,o.top=a.right,o.right=a.bottom,o.bottom=a.left;break;case 7:o.left=a.bottom,o.top=a.right,o.right=a.top,o.bottom=a.left;break;case 8:o.left=a.bottom,o.top=a.left,o.right=a.top,o.bottom=a.right}return o.orientation>4&&(o.maxWidth=a.maxHeight,o.maxHeight=a.maxWidth,o.minWidth=a.minHeight,o.minHeight=a.minWidth,o.sourceWidth=a.sourceHeight,o.sourceHeight=a.sourceWidth),o}})}});